# チーム向けClaude Code使用ガイド

## 概要
このガイドは、チームメンバーがClaude Code (claude.ai/code)を使ってプロジェクトに貢献する際の必須手順を説明します。

## 必須設定

### 1. 初回セットアップ
Claude Codeでプロジェクトを開く際は、**必ず**以下を実行してください：

```bash
# プロジェクトルートに移動
cd /path/to/ITDO_ERP2

# Claude Codeで開く（CLAUDE.mdが自動的に読み込まれます）
```

### 2. Issue着手時の必須手順

**⚠️ 重要**: Issue作業開始前に、必ずClaude Codeに以下のプロンプトを送信してください：

```
## Issue #[番号] の作業を開始します

以下の手順を必ず実行してください：

1. このissueが既に他の人によって作業中でないか確認
2. Issue #[番号] にコメントで着手宣言を投稿
3. 適切なブランチを作成 
4. Draft PRを作成
5. プロジェクトのCLAUDE.mdの規約に従って実装

CLAUDE.mdの「Issue Assignment Protocol」に従って作業を開始してください。
```

### 3. Claude Codeへの指示例

#### 基本的な開始プロンプト
```
Issue #40「ユーザー権限・ロール管理API実装」の作業を開始します。

CLAUDE.mdの規約に従って以下を実行してください：
1. Issue着手宣言のコメント投稿
2. feature/#40-role-management ブランチ作成
3. Draft PR作成
4. TDDアプローチで実装

不明な点があれば質問してください。
```

#### 途中参加の場合
```
Issue #43の作業を引き継ぎます。

現在の状況を確認してから、CLAUDE.mdの規約に従って作業を継続してください：
1. 既存のブランチとPRの状況確認
2. 必要に応じて引き継ぎコメント投稿
3. テスト状況の確認
4. 実装の続行

まず現在の状況を教えてください。
```

## 作業中の重要な注意事項

### DO（必須事項）
- ✅ 作業開始前にCLAUDE.mdの確認
- ✅ Issue着手宣言のコメント投稿
- ✅ TDDアプローチの徹底
- ✅ 定期的なPR更新
- ✅ 型チェック（mypy --strict）の実行
- ✅ テストカバレッジ80%以上の維持

### DON'T（禁止事項）
- ❌ Issue着手宣言なしでの作業開始
- ❌ テストを書かずに実装を進める
- ❌ 型エラーがある状態でのコミット
- ❌ any型の使用
- ❌ Draft PRなしでの長期作業

## トラブルシューティング

### Claude Codeが規約に従わない場合

1. **再度明確に指示する**
   ```
   CLAUDE.mdの「Issue Assignment Protocol」は必須です。
   Issue #[番号] にコメントを投稿してからブランチを作成してください。
   ```

2. **具体的なコマンドを要求する**
   ```
   以下を実行してください：
   1. gh issue comment [番号] --body "🚀 Starting work on this issue"
   2. git checkout -b feature/#[番号]-[description]
   3. gh pr create --draft ...
   ```

3. **段階的に進める**
   ```
   まず Issue着手宣言だけを行ってください。
   実装は着手宣言後に進めます。
   ```

### 作業重複が発生した場合

```
Issue #[番号] は既に@[他のメンバー]が作業中のようです。
以下を確認してください：
1. Issueのコメント履歴
2. 関連するPRの存在
3. 作業分担の調整が必要かどうか

他のissueに取り組むか、協力体制を取るか判断してください。
```

## よくある質問

### Q: Claude Codeが勝手に実装を始めてしまいます
A: プロンプトで明確に指示してください：
```
実装前に必ずIssue着手宣言を行ってください。
CLAUDE.mdの規約に従って段階的に進めてください。
```

### Q: 緊急でIssue着手宣言を省略したい場合は？
A: 緊急時でも着手宣言は必須です。以下の短縮版を使用：
```
🚀 緊急対応でこのissueを開始します（担当者：@[username]）
```

### Q: 他の人が作業中のIssueをClaude Codeが触ろうとします
A: 即座に停止指示を出してください：
```
STOP! このissueは既に作業中です。
他のissueを選択してください。
```

## チーム内での情報共有

### Slackでの共有（推奨）
```
💻 Claude Code作業開始
Issue: #[番号] [タイトル]
担当者: @[username]
予定完了: [日付]
PR: [Draft PRのURL]
```

### 週次振り返りでの確認項目
- Claude Code使用時の規約遵守状況
- Issue着手宣言の実施率
- 作業重複の発生件数
- 改善提案

## 更新履歴
- 2025-07-07: 初版作成
- [日付]: [更新内容]