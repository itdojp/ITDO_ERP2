# ITDO ERP 要件定義書

**文書番号**: ITDO-ERP-RD-001  
**バージョン**: 1.0  
**作成日**: 2025年7月5日  
**作成者**: システム設計チーム  
**承認者**: ootakazuhiko 

---

## 1. はじめに

### 1.1 目的
本書は、ITDO ERPシステムの要件を明確に定義し、開発チーム、ステークホルダー間での認識を統一することを目的とする。

### 1.2 スコープ
本要件定義書は、ITDO ERPシステムの機能要件、非機能要件、外部インターフェース要件、およびシステム制約を対象とする。

### 1.3 前提条件
- クラウドネイティブなSaaS型システムとして開発する
- 日本国内の中小・中堅企業を主要ターゲットとする
- 段階的なリリースを前提とする

---

## 2. 機能要件

### 2.1 ユーザー管理機能

#### 2.1.1 ユーザー認証
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| AUTH-001 | ログイン機能 | メールアドレスとパスワードによる認証 | 必須 |
| AUTH-002 | 多要素認証 | TOTP方式による2段階認証 | 必須 |
| AUTH-003 | パスワードリセット | メールによるパスワード再設定 | 必須 |
| AUTH-004 | セッション管理 | JWTトークンによるセッション管理、有効期限24時間 | 必須 |
| AUTH-005 | SSO連携 | SAML2.0/OAuth2.0による外部IdP連携 | 推奨 |

#### 2.1.2 ユーザー管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| USER-001 | ユーザー登録 | 管理者によるユーザー新規登録 | 必須 |
| USER-002 | ユーザー情報編集 | プロフィール情報の編集 | 必須 |
| USER-003 | ユーザー無効化 | 退職時のアカウント無効化 | 必須 |
| USER-004 | 一括登録 | CSVによるユーザー一括登録 | 推奨 |

### 2.2 組織管理機能

#### 2.2.1 企業・部門管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| ORG-001 | 企業情報管理 | 企業基本情報の登録・編集 | 必須 |
| ORG-002 | 部門階層管理 | 階層型組織構造の定義 | 必須 |
| ORG-003 | チーム管理 | 部門内のチーム定義 | 必須 |
| ORG-004 | 組織図表示 | 組織構造の可視化 | 推奨 |

#### 2.2.2 権限管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| PERM-001 | ロール定義 | カスタムロールの作成 | 必須 |
| PERM-002 | 権限割当 | ユーザーへのロール付与 | 必須 |
| PERM-003 | データアクセス制御 | 部門別データアクセス権限 | 必須 |
| PERM-004 | 機能別権限 | 機能単位での利用制限 | 必須 |

### 2.3 プロジェクト管理機能

#### 2.3.1 プロジェクト基本機能
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| PROJ-001 | プロジェクト作成 | 基本情報、期間、予算の設定 | 必須 |
| PROJ-002 | WBS管理 | 階層型タスク構造の定義 | 必須 |
| PROJ-003 | マイルストーン | 重要な節目の設定・管理 | 必須 |
| PROJ-004 | ガントチャート | タスクの時系列表示 | 必須 |
| PROJ-005 | 進捗管理 | タスク完了率、遅延警告 | 必須 |

#### 2.3.2 リソース管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| RES-001 | リソース登録 | 人的リソースの登録 | 必須 |
| RES-002 | スキル管理 | 技術スキル、資格の管理 | 必須 |
| RES-003 | アサイン管理 | プロジェクトへの割当 | 必須 |
| RES-004 | 稼働率分析 | リソースの利用状況分析 | 必須 |
| RES-005 | 負荷調整 | リソース平準化機能 | 推奨 |

### 2.4 財務管理機能

#### 2.4.1 予算管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| BUD-001 | 予算登録 | プロジェクト別予算設定 | 必須 |
| BUD-002 | 予算配分 | 費目別予算配分 | 必須 |
| BUD-003 | 予実管理 | 予算消化状況の追跡 | 必須 |
| BUD-004 | 超過警告 | 予算超過時のアラート | 必須 |

#### 2.4.2 経費管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| EXP-001 | 経費申請 | 経費の申請・登録 | 必須 |
| EXP-002 | 承認ワークフロー | 多段階承認プロセス | 必須 |
| EXP-003 | 領収書管理 | 画像アップロード、OCR | 推奨 |
| EXP-004 | 経費精算 | 月次精算処理 | 必須 |

#### 2.4.3 請求管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| INV-001 | 見積書作成 | テンプレートベース作成 | 必須 |
| INV-002 | 請求書発行 | PDF出力、メール送信 | 必須 |
| INV-003 | 入金管理 | 入金状況の記録 | 必須 |
| INV-004 | 売掛金管理 | 未回収金額の追跡 | 必須 |

### 2.5 CRM機能

#### 2.5.1 顧客管理
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| CRM-001 | 顧客登録 | 企業・担当者情報管理 | 必須 |
| CRM-002 | 活動履歴 | 商談、連絡履歴の記録 | 必須 |
| CRM-003 | 商談管理 | 案件の進捗管理 | 必須 |
| CRM-004 | 顧客分析 | 売上分析、ABC分析 | 推奨 |

### 2.6 ワークフロー機能

#### 2.6.1 ワークフロー定義
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| WF-001 | フロー定義 | ビジュアルエディタ | 必須 |
| WF-002 | 条件分岐 | 金額、権限による分岐 | 必須 |
| WF-003 | 承認者設定 | 動的承認者の指定 | 必須 |
| WF-004 | 通知設定 | メール、アプリ内通知 | 必須 |

### 2.7 レポート・分析機能

#### 2.7.1 ダッシュボード
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| DASH-001 | KPI表示 | 重要指標のリアルタイム表示 | 必須 |
| DASH-002 | カスタマイズ | ウィジェットの配置変更 | 推奨 |
| DASH-003 | ドリルダウン | 詳細データへの遷移 | 推奨 |

#### 2.7.2 レポート出力
| 要件ID | 要件名 | 詳細 | 優先度 |
|--------|--------|------|--------|
| REP-001 | 定型レポート | 標準レポートテンプレート | 必須 |
| REP-002 | カスタムレポート | レポートビルダー機能 | 推奨 |
| REP-003 | エクスポート | Excel、PDF、CSV出力 | 必須 |
| REP-004 | スケジュール配信 | 定期レポートの自動送信 | 推奨 |

---

## 3. 非機能要件

### 3.1 性能要件

| 要件ID | 要件項目 | 要件内容 | 測定条件 |
|--------|----------|----------|----------|
| PERF-001 | 応答時間 | 画面表示3秒以内 | 通常操作時 |
| PERF-002 | API応答 | 95%が1秒以内 | 負荷テスト時 |
| PERF-003 | 同時接続 | 1,000ユーザー | ピーク時 |
| PERF-004 | データ処理 | 10万件/時間 | バッチ処理 |
| PERF-005 | ファイルアップロード | 100MB/分 | 単一ファイル |

### 3.2 可用性要件

| 要件ID | 要件項目 | 要件内容 | 備考 |
|--------|----------|----------|------|
| AVAIL-001 | 稼働率 | 99.9% | 年間停止8.76時間 |
| AVAIL-002 | 計画停止 | 月1回、2時間以内 | 深夜帯実施 |
| AVAIL-003 | RTO | 4時間以内 | 災害時 |
| AVAIL-004 | RPO | 1時間以内 | データ損失許容 |
| AVAIL-005 | バックアップ | 日次、30日保持 | 世代管理 |

### 3.3 拡張性要件

| 要件ID | 要件項目 | 要件内容 | 備考 |
|--------|----------|----------|------|
| SCALE-001 | ユーザー数 | 10,000ユーザー対応 | 将来拡張 |
| SCALE-002 | データ量 | 10TB対応 | 5年運用想定 |
| SCALE-003 | テナント数 | 1,000社対応 | マルチテナント |
| SCALE-004 | 自動スケール | CPU80%で拡張 | K8s HPA |

### 3.4 セキュリティ要件

| 要件ID | 要件項目 | 要件内容 | 準拠規格 |
|--------|----------|----------|----------|
| SEC-001 | 通信暗号化 | TLS 1.3 | - |
| SEC-002 | データ暗号化 | AES-256 | 保存時暗号化 |
| SEC-003 | 認証強度 | パスワード8文字以上、複雑性チェック | NIST SP800-63B |
| SEC-004 | アクセス制御 | RBAC実装 | - |
| SEC-005 | 監査ログ | 全操作記録、改ざん防止 | - |
| SEC-006 | 脆弱性対策 | 月次セキュリティパッチ | - |

### 3.5 ユーザビリティ要件

| 要件ID | 要件項目 | 要件内容 | 備考 |
|--------|----------|----------|------|
| UI-001 | レスポンシブ | PC、タブレット、スマホ対応 | - |
| UI-002 | 多言語対応 | 日本語、英語 | 将来中国語追加 |
| UI-003 | アクセシビリティ | WCAG 2.1 レベルAA準拠 | - |
| UI-004 | ブラウザ対応 | Chrome、Edge、Safari最新版 | - |

### 3.6 運用・保守要件

| 要件ID | 要件項目 | 要件内容 | 備考 |
|--------|----------|----------|------|
| OPS-001 | 監視 | 24時間365日監視 | 自動化 |
| OPS-002 | ログ管理 | 90日間保持 | 検索可能 |
| OPS-003 | 構成管理 | IaC実装 | Terraform |
| OPS-004 | パッチ適用 | 月次適用 | 自動化 |

---

## 4. 外部インターフェース要件

### 4.1 外部システム連携

| 要件ID | 連携システム | 連携方式 | データ | 備考 |
|--------|--------------|----------|---------|------|
| IF-001 | 会計システム | REST API | 仕訳データ | 日次連携 |
| IF-002 | 人事システム | CSV/SFTP | 従業員マスタ | 日次連携 |
| IF-003 | 勤怠システム | REST API | 勤務実績 | リアルタイム |
| IF-004 | メールサーバー | SMTP | 通知メール | - |
| IF-005 | ストレージ | S3 API | ファイル | - |

### 4.2 API要件

| 要件ID | 要件項目 | 要件内容 | 備考 |
|--------|----------|----------|------|
| API-001 | API仕様 | RESTful API | OpenAPI 3.0 |
| API-002 | 認証方式 | OAuth 2.0 | JWT |
| API-003 | レート制限 | 1000req/時間 | ユーザー単位 |
| API-004 | バージョニング | URLパス方式 | /api/v1/ |

---

## 5. システム制約

### 5.1 技術制約
- バックエンド: Python 3.12以上、FastAPI使用
- フロントエンド: Next.js 14以上、TypeScript必須
- データベース: PostgreSQL 14以上
- コンテナ: Docker/Kubernetes環境

### 5.2 規制・コンプライアンス
- 個人情報保護法準拠
- 電子帳簿保存法対応
- インボイス制度対応

### 5.3 業務制約
- 日本の商習慣に準拠（月末締め、翌月末払い等）
- 日本の会計基準対応
- 和暦表示対応

---

## 6. 移行要件

### 6.1 データ移行

| 要件ID | 移行対象 | データ量 | 移行方式 | 備考 |
|--------|----------|----------|----------|------|
| MIG-001 | マスタデータ | 10万件 | CSV一括 | 初期移行 |
| MIG-002 | トランザクション | 100万件 | 段階移行 | 過去2年分 |
| MIG-003 | ドキュメント | 10GB | バッチ転送 | - |

### 6.2 システム切替
- 段階的切替方式を採用
- パイロット部門から順次展開
- 並行稼働期間: 3ヶ月

---

## 7. 受入条件

### 7.1 受入テスト
- 全機能要件の実装確認
- 非機能要件の性能測定
- ユーザー受入テスト（UAT）の実施

### 7.2 納品物
- システム一式（ソースコード含む）
- 設計書類一式
- 操作マニュアル
- 運用手順書

---

## 8. 用語集

| 用語 | 説明 |
|------|------|
| WBS | Work Breakdown Structure（作業分解構造） |
| KPI | Key Performance Indicator（重要業績評価指標） |
| RTO | Recovery Time Objective（目標復旧時間） |
| RPO | Recovery Point Objective（目標復旧時点） |
| RBAC | Role-Based Access Control（ロールベースアクセス制御） |
| IaC | Infrastructure as Code（コードによるインフラ管理） |

---

## 9. 改訂履歴

| バージョン | 改訂日 | 改訂内容 | 改訂者 |
|------------|--------|----------|--------|
| 1.0 | 2025/07/05 | 初版作成 | システム設計チーム |

---

**承認**

プロジェクトマネージャー: _________________ 日付: _______  
プロダクトオーナー: _________________ 日付: _______  
ユーザー代表: _________________ 日付: _______