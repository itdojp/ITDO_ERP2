# ITDO ERP システム概要設計書

**文書番号**: ITDO-ERP-DD-001  
**バージョン**: 1.0  
**作成日**: 2025年7月5日  
**作成者**: システム設計チーム  
**承認者**: ootakazuhiko  

---

## 1. はじめに

### 1.1 目的
本書は、ITDO ERP（Enterprise Resource Planning）システムの概要設計を定義し、システムの全体像、目標、スコープ、および主要な設計方針を明確にすることを目的とする。

### 1.2 適用範囲
本設計書は、ITDO ERPシステムの全体アーキテクチャ、主要コンポーネント、およびそれらの相互関係について記述する。

### 1.3 用語定義

| 用語 | 説明 |
|------|------|
| ERP | Enterprise Resource Planning（統合基幹業務システム） |
| SaaS | Software as a Service（クラウドベースのソフトウェア提供形態） |
| API | Application Programming Interface（アプリケーション間の通信インターフェース） |
| UI/UX | User Interface/User Experience（ユーザーインターフェース/ユーザー体験） |

---

## 2. システム概要

### 2.1 システムの目的
ITDO ERPは、企業の基幹業務（プロジェクト管理、リソース管理、財務管理、顧客管理など）を統合的に管理し、業務効率化と意思決定の迅速化を実現する次世代型ERPシステムである。

### 2.2 システムの特徴
- **マルチテナント対応**: 複数企業の同時利用が可能なSaaS型アーキテクチャ
- **リアルタイム連携**: 部門間のデータをリアルタイムで共有・連携
- **AI/ML統合**: 予測分析、異常検知、自動化による業務効率化
- **モバイル対応**: スマートフォン・タブレットからの利用が可能
- **日本語完全対応**: 日本の商習慣に適した機能とUI

### 2.3 対象ユーザー
- **主要ターゲット**: 中小・中堅企業（従業員数50〜1000名）
- **業種**: IT、サービス業、製造業、建設業など
- **ユーザー層**: 経営層、管理職、一般従業員

---

## 3. システムアーキテクチャ概要

### 3.1 アーキテクチャパターン
マイクロサービスアーキテクチャを採用し、各機能を独立したサービスとして実装する。

```
┌─────────────────────────────────────────────────────────────┐
│                        クライアント層                         │
├─────────────────┬─────────────────┬─────────────────────────┤
│   Webブラウザ   │ モバイルアプリ  │    外部システム         │
└────────┬────────┴────────┬────────┴────────┬────────────────┘
         │                 │                 │
┌────────▼─────────────────▼─────────────────▼────────────────┐
│                      API Gateway (Kong/Nginx)                │
└────────┬─────────────────────────────────────────────────────┘
         │
┌────────▼─────────────────────────────────────────────────────┐
│                     アプリケーション層                        │
├─────────────┬─────────────┬─────────────┬─────────────────┤
│   Core API  │ Project Mgmt│ Financial   │  CRM Service    │
│   Service   │   Service   │  Service    │                 │
└─────────────┴─────────────┴─────────────┴─────────────────┘
         │
┌────────▼─────────────────────────────────────────────────────┐
│                        データ層                               │
├─────────────┬─────────────┬─────────────┬─────────────────┤
│PostgreSQL 15│   Redis 7   │   Keycloak   │  File Storage  │
└─────────────┴─────────────┴─────────────┴─────────────────┘
```

### 3.2 技術スタック

#### バックエンド
- **言語**: Python 3.13
- **フレームワーク**: FastAPI
- **ORM**: SQLAlchemy 2.0
- **認証**: Keycloak (OAuth2/OpenID Connect)
- **非同期処理**: Celery + Redis

#### フロントエンド
- **フレームワーク**: React 18 + Vite
- **言語**: TypeScript 5 (strict mode)
- **状態管理**: React Query + Context API
- **UIライブラリ**: 規約に準拠

#### インフラストラクチャ
- **コンテナ**: Podman (推奨) / Docker
- **開発環境**: ハイブリッド環境（データ層はコンテナ、開発層はローカル推奨）
- **CI/CD**: GitHub Actions
- **パッケージ管理**: uv (Python), npm (Node.js)

---

## 4. 主要機能モジュール

### 4.1 コア機能
1. **認証・認可管理**
   - ユーザー認証（ID/パスワード、2FA）
   - ロールベースアクセス制御（RBAC）
   - シングルサインオン（SSO）対応

2. **組織管理**
   - 企業情報管理
   - 部門・チーム管理
   - 権限管理

### 4.2 業務機能モジュール

#### 4.2.1 プロジェクト管理
- プロジェクト作成・編集
- タスク管理（WBS）
- ガントチャート
- 進捗管理・レポート

#### 4.2.2 リソース管理
- 人的リソース管理
- リソース割当て
- スキル管理
- 稼働率分析

#### 4.2.3 財務管理
- 予算管理
- 経費管理
- 請求書発行
- 収支分析

#### 4.2.4 顧客管理（CRM）
- 顧客情報管理
- 営業活動管理
- 商談管理
- 顧客分析

#### 4.2.5 ワークフロー
- ワークフロー定義
- 承認プロセス
- 通知・アラート
- 自動化ルール

### 4.3 共通機能
- **レポート・分析**: ダッシュボード、各種レポート出力
- **コミュニケーション**: チャット、通知、メール連携
- **ファイル管理**: 文書管理、バージョン管理
- **監査ログ**: 操作履歴、変更履歴

---

## 5. 非機能要件

### 5.1 性能要件
- **応答時間**: 画面遷移3秒以内、API応答1秒以内
- **同時接続数**: 1000ユーザー同時接続対応
- **データ処理**: バッチ処理10万件/時間

### 5.2 可用性要件
- **稼働率**: 99.9%（年間停止時間8.76時間以内）
- **バックアップ**: 日次バックアップ、30日間保持
- **災害対策**: マルチリージョン対応

### 5.3 セキュリティ要件
- **通信**: TLS 1.3による暗号化
- **データ**: 保存時暗号化（AES-256）
- **認証**: 多要素認証対応
- **監査**: 全操作ログの記録

### 5.4 拡張性要件
- **水平スケーリング**: マイクロサービス単位でのスケールアウト
- **マルチテナント**: テナント数無制限対応
- **カスタマイズ**: APIによる機能拡張

---

## 6. 開発方針

### 6.1 開発手法
- **イシュー駆動開発**: すべての作業はGitHub Issueから開始
- **TDD (テスト駆動開発)**: テストコード実装 → 実装の順序を厳守
- **8フェーズ開発プロセス**: Issue確認 → Draft PR作成 → 仕様書作成 → テスト仕様作成 → テストコード実装 → 実装 → ドキュメント更新 → レビュー準備
- **DevOps**: CI/CDパイプラインによる自動化

### 6.2 品質管理
- **型安全性**: mypy --strict (Python), TypeScript strict mode
- **テストカバレッジ**: 80%以上
- **コードレビュー**: プルリクエストベースのレビュー
- **禁止事項**: any型の使用禁止、pip/activate使用禁止（uvを使用）

### 6.3 ドキュメント管理
- **設計書**: Markdownベースの管理
- **API仕様**: OpenAPI 3.0による自動生成
- **運用手順書**: 運用自動化と手順の文書化

---

## 7. プロジェクト体制

### 7.1 開発体制
- **プロジェクトマネージャー**: 1名
- **テックリード**: 2名
- **バックエンド開発**: 4名
- **フロントエンド開発**: 4名
- **インフラエンジニア**: 2名
- **QAエンジニア**: 2名

### 7.2 ステークホルダー
- **プロダクトオーナー**: 製品方針の決定
- **ユーザー企業**: 要件定義への参画
- **運用チーム**: 運用要件の提供

---

## 8. リスク管理

### 8.1 技術的リスク
| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| 性能問題 | 高 | 中 | 早期の性能テスト実施 |
| セキュリティ脆弱性 | 高 | 低 | セキュリティ監査の実施 |
| 技術的負債 | 中 | 高 | リファクタリングの計画的実施 |

### 8.2 プロジェクトリスク
| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| 要件変更 | 高 | 高 | アジャイル開発による柔軟な対応 |
| スケジュール遅延 | 高 | 中 | バッファの確保、段階的リリース |
| 品質問題 | 高 | 中 | 自動テストの充実 |

---

## 9. 今後の展開

### 9.1 フェーズ1（6ヶ月）
- コア機能の実装完了
- 基本的な業務機能の実装
- パイロット企業での試験運用

### 9.2 フェーズ2（12ヶ月）
- 全機能の実装完了
- 本格的な商用サービス開始
- モバイルアプリのリリース

### 9.3 将来構想
- AI/ML機能の拡充
- IoT連携機能
- ブロックチェーン活用
- グローバル展開

---

## 10. 改訂履歴

| バージョン | 改訂日 | 改訂内容 | 改訂者 |
|------------|--------|----------|--------|
| 1.0 | 2025/07/05 | 初版作成 | システム設計チーム |

---

**承認**

プロジェクトマネージャー: _________________ 日付: _______  
テックリード: _________________ 日付: _______  
プロダクトオーナー: _________________ 日付: _______