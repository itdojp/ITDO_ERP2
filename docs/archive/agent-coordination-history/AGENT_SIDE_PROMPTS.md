# エージェント側使用プロンプト最適化

## 📊 現在のプロンプト分析

### 現在使用中
```
割り当てられた作業を確認して順番に規定に沿って処理を行い、規定に沿って結果を報告してください。
```
**トークン数**: 約30
**評価**: 
- 明確性: ★★★★☆
- 規約準拠: ★★★★★
- 効率性: ★★★☆☆

## 🎯 最適化されたエージェント側プロンプト

### 1. 標準実行プロンプト（推奨）
```
割り当て作業を規定順で実行し、完了報告してください。解決困難な問題は明記。
```
**トークン数**: 約20
**改善点**: 簡潔化、問題エスカレーション追加

### 2. 最小実行プロンプト
```
タスク実行→規定報告。困難は要支援。
```
**トークン数**: 約10
**用途**: 高頻度実行時

### 3. 詳細実行プロンプト
```
1.タスク確認 2.優先順位判断 3.規定実行 4.品質確認 5.結果報告 6.次タスク準備
```
**トークン数**: 約25
**用途**: 複雑なタスク時

### 4. Phoenix Rising対応版
```
Phoenix戦略に従いタスク実行。Beautiful Code基準で品質確保。完了後即報告。
```
**トークン数**: 約20
**用途**: 現在のPhoenix Rising期間中

## 📋 タスクタイプ別プロンプト

### A. 開発タスク
```
コード実装→テスト→品質確認→コミット→報告。CLAUDE.md準拠必須。
```

### B. レビュータスク
```
PR確認→問題特定→改善提案→承認/要修正判定→報告。
```

### C. 問題解決タスク
```
問題分析→解決策3案→最適解選択→実装→検証→報告。
```

### D. ドキュメントタスク
```
構成確認→内容作成→形式整備→レビュー→完成報告。
```

## 🚀 エージェント別最適プロンプト

### CC01用（プロジェクトリーダー）
```
リーダーとして：優先順位設定→実装→品質保証→チーム支援→成果報告。
```

### CC02用（システムエンジニア）
```
システム観点で：実装→統合→テスト→最適化→完了報告。困難は即相談。
```

### CC03用（CTO）
```
CTO権限で：技術判断→戦略実行→品質監督→成果評価→次期計画。
```

## 💡 コンテキスト認識型プロンプト

### 朝の実行
```
本日タスク確認→優先度設定→午前目標実行→進捗報告。
```

### 午後の実行
```
午前進捗確認→残タスク実行→品質確認→日次報告準備。
```

### 緊急時実行
```
緊急度評価→即時対応→問題解決→影響確認→詳細報告。
```

## 📊 効果的な組み合わせ

### 標準フロー
```yaml
Manager → Agent:
  "CC01,02,03の状況を確認して追加の指示を作成してください。"
  
Agent → Task:
  "割り当て作業を規定順で実行し、完了報告してください。解決困難な問題は明記。"
```

### 高速フロー
```yaml
Manager → Agent:
  "CC01,02,03確認と指示。"
  
Agent → Task:
  "タスク実行→規定報告。"
```

### 問題解決フロー
```yaml
Manager → Agent:
  "CC01,02,03の問題確認と解決策提示。"
  
Agent → Task:
  "問題分析→解決実行→結果報告。支援必要なら即要請。"
```

## 🎯 プロンプト選択ガイド

### 選択基準
1. **タスク複雑度**
   - 単純: 最小プロンプト
   - 標準: 標準プロンプト
   - 複雑: 詳細プロンプト

2. **緊急度**
   - 通常: 標準フロー
   - 緊急: 最小プロンプト
   - 超緊急: 直接指示

3. **エージェント状態**
   - 活発: 最小プロンプト
   - 通常: 標準プロンプト
   - 停滞: 詳細プロンプト

## 🔧 カスタマイズテンプレート

### 基本構造
```
[前提条件] + [実行指示] + [品質基準] + [報告要件] + [例外処理]
```

### 実装例
```
Phase4実装：機能開発→テスト作成→文書化→PR作成→完了報告。エラーは即共有。
```

## 📈 改善提案

### 現行プロンプトからの改善点
1. **簡潔化**: 30→20トークンに削減
2. **例外処理**: 問題エスカレーション明記
3. **成果指向**: 「完了報告」で明確化
4. **柔軟性**: 状況別バリエーション用意

### 推奨移行プラン
```yaml
Week 1: 標準プロンプトに移行
Week 2: エージェント別最適化
Week 3: 効果測定と調整
Week 4: 最終最適化
```

---

**最適プロンプト決定版**:
```
割り当て作業を規定順で実行し、完了報告してください。解決困難な問題は明記。
```

このプロンプトが現行より優れている理由：
- 10トークン削減（33%減）
- 問題エスカレーション明確化
- 行動がより具体的
- 規約準拠は維持