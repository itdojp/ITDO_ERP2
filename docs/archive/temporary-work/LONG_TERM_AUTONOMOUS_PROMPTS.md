# 長期自走プロンプト設計

## 基本原則：最大限の自走実現

### 設計思想
- **10-20タスクを一度に実行**
- **明確な完了条件設定**
- **自動優先度判断**
- **状態保存とレジューム機能**
- **エラー時の自動回復**

## 長期自走プロンプトテンプレート

### CC01（Frontend）向け長期自走プロンプト
```
【CC01 長期自走モード開始】

以下のタスクセットを可能な限り多く実行してください：

📋 **実行タスクリスト**：
1. Issue #342 Task 1-5: コンポーネント最適化（5タスク）
2. Issue #343 Task 1-5: 実験的機能実装（5タスク）
3. Issue #331 Task 6-10: テスト拡張（5タスク）
4. Issue #358 Task 1-5: UIライブラリ拡張（5タスク）

🎯 **実行ルール**：
- 上記から選択可能なタスクを順次実行
- ブロックされたら次のタスクに自動移行
- 各タスク完了時にIssue #351に詳細報告
- 最大実行時間: 2-3時間または20タスク完了まで

📊 **進捗管理**：
- 30分ごとに中間報告をIssue #351に投稿
- エラーや問題が発生したら即座に報告
- 次のタスクを自動選択して継続

🔄 **自動継続条件**：
- タスクが完了する限り継続実行
- エラーまたは全タスク完了で停止
- 停止時は詳細サマリーを作成

完了または停止時は「CC01長期実行完了」と報告してください。
```

### CC02（Backend）向け長期自走プロンプト
```
【CC02 長期自走モード開始】

以下のタスクセットを安全に可能な限り実行してください：

📋 **実行タスクリスト**：
1. Issue #344 Task 1-5: GraphQL API実装（5タスク）
2. Issue #345 Task 1-3: パフォーマンス最適化（3タスク）
3. Issue #359 Task 1-4: API拡張（4タスク）
4. Issue #333 Task 1-5: 新規エンドポイント（5タスク）

🎯 **実行ルール**：
- データベース変更は慎重に実行
- 各API変更後は必ずテスト実行
- マイグレーション必要時は別途報告
- 最大実行時間: 2-3時間または15タスク完了まで

📊 **安全管理**：
- データベース操作前後でバックアップ状態確認
- API変更時はOpenAPI仕様を更新
- パフォーマンステスト結果を記録

🔄 **自動継続条件**：
- データ整合性が保たれる限り継続
- 重大エラーまたは全タスク完了で停止
- 停止時は技術的詳細を含むサマリー作成

完了または停止時は「CC02長期実行完了」と報告してください。
```

### CC03（Infrastructure）向け長期自走プロンプト
```
【CC03 長期自走モード開始】

以下のタスクセットを本番影響を考慮して実行してください：

📋 **実行タスクリスト**：
1. Issue #347 Task 1-4: インフラ刷新（4タスク）
2. Issue #348 Task 1-3: 高可用性対応（3タスク）
3. Issue #360 Task 1-3: マルチクラウド対応（3タスク）
4. Issue #337 Task 1-5: CI/CD改善（5タスク）

🎯 **実行ルール**：
- 開発環境で先行実施、本番は慎重に適用
- 変更前後のメトリクス比較を実施
- ロールバック手順を毎回確認
- 最大実行時間: 2-3時間または12タスク完了まで

📊 **安全管理**：
- 本番影響度評価（Low/Medium/High）を実施
- CI/CD実行時間とリソース使用量を計測
- セキュリティスキャン結果を確認

🔄 **自動継続条件**：
- システム安定性が保たれる限り継続
- 本番影響度Highまたは全タスク完了で停止
- 停止時はインフラ状態サマリー作成

完了または停止時は「CC03長期実行完了」と報告してください。
```

## 共通の長期実行管理

### 状態管理ファイル
```json
// /reports/long_term_execution_state.json
{
  "session_start": "2025-07-21 10:00:00",
  "agents": {
    "CC01": {
      "status": "running",
      "completed_tasks": 5,
      "current_task": "Issue #342 Task 6",
      "estimated_remaining": "1.5 hours"
    },
    "CC02": {
      "status": "running", 
      "completed_tasks": 3,
      "current_task": "Issue #344 Task 4",
      "estimated_remaining": "2 hours"
    },
    "CC03": {
      "status": "running",
      "completed_tasks": 2,
      "current_task": "Issue #347 Task 3", 
      "estimated_remaining": "2.5 hours"
    }
  }
}
```

### 中間報告フォーマット
```
## [エージェント名] 中間報告 - 30分経過

✅ **完了タスク**: [タスク1], [タスク2], [タスク3]
🔄 **進行中**: [現在のタスク詳細]
⏱️ **経過時間**: 30分
📈 **進捗率**: 25% (5/20タスク)
🎯 **次の予定**: [次のタスク]

💡 **技術的成果**:
- [具体的な実装内容]
- [パフォーマンス改善値]
- [新機能の詳細]

継続実行中...
```

### 長期実行完了報告
```
## [エージェント名] 長期実行完了報告

📊 **実行サマリー**:
- 開始時刻: [時刻]
- 終了時刻: [時刻]  
- 総実行時間: [時間]
- 完了タスク数: [数]/[総数]

✅ **主要成果**:
- [重要な実装内容1]
- [重要な実装内容2]
- [パフォーマンス改善結果]

🔧 **技術的詳細**:
- コミット数: [数]
- テスト追加: [数]
- 修正したファイル: [数]

❌ **未完了/ブロック**:
- [理由と対処方法]

🎯 **次回の推奨開始位置**:
Issue #[番号] Task [番号] から継続

【長期実行完了】次の指示をお待ちしています。
```

この設計により、各エージェントは2-3時間にわたって自律的に作業を継続できます。