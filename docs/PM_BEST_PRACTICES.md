# プロジェクトマネジメント ベストプラクティス

## 📋 Claude Code エージェント管理

### 🎯 効果的なプロンプト設計

#### プロンプトの基本構造
```markdown
🚨 [優先度マーク] [簡潔なタイトル]

[背景説明（簡潔に）]

```bash
# 実行手順（番号付き）
1. コマンド1
2. コマンド2
```

✅ 成功確認：
```bash
確認コマンド
```

🎯 期待される結果：[具体的な成果]
```

#### プロンプト優先度マーク
- 🚨 **CRITICAL**: 即座の対応が必要
- 🎯 **HIGH**: 当日中の対応が必要  
- 💡 **MEDIUM**: 計画的な対応が必要
- 📋 **LOW**: 時間に余裕がある場合

### 📊 実証済みの効果的なプロンプト

#### 1. 自動化システム再起動プロンプト
```
🚨 緊急: 自動化システムの再起動が必要です

以下のコマンドを順番に実行してください：

```bash
# 1. 既存プロセス停止
pkill -f "agent-work"
pkill -f "sleep 900"

# 2. 環境変数リセット
unset CLAUDE_AGENT_ID
unset AGENT_LABEL

# 3. 最新環境準備
cd /mnt/c/work/ITDO_ERP2
git pull origin main

# 4. 自動化システム再初期化
source scripts/claude-code-automation/agent/agent-init.sh CC01  # IDを適切に設定
```

✅ 成功確認：
```bash
echo $CLAUDE_AGENT_ID  # あなたのIDが表示されるか
my-tasks               # 最新タスクが取得できるか
```

🎯 最優先タスク：`my-tasks`で確認してください
```

#### 2. 緊急修正プロンプト
```
🚨 緊急: 1行修正でPR完成！

**重要発見**: PR #XXは1行の修正のみで完成します！

```bash
git checkout [ブランチ名]
sed -i '46s/.*//' [ファイル名]
git add [ファイル名]
git commit -m "fix: Remove whitespace from empty line"
git push origin [ブランチ名]
```

✅ 修正内容：
- ファイル: `[ファイル名]`
- 行: XX行目
- 変更: [具体的な変更内容]

🎯 これで完成します！見つけたら即座に実行してください。
```

### 🔄 エージェント管理のワークフロー

#### 1. 定期的な状況確認
```bash
# 全エージェントの状況を一括確認
gh issue list --label "cc01,cc02,cc03" --state open

# 特定エージェントの詳細確認
gh issue view [ISSUE_NUMBER] --comments
```

#### 2. 優先度に基づくタスク配布
1. **CRITICAL**: 全エージェントに即座に通知
2. **HIGH**: 主担当 + 副担当1名
3. **MEDIUM**: 主担当のみ
4. **LOW**: 時間に余裕がある時に配布

#### 3. 進捗監視
- Issue #99での定期報告
- PRの CI/CD 状況監視
- エージェントの応答時間追跡

### 📈 成功指標

#### エージェント管理の KPI
- **応答時間**: プロンプト送信から実行完了まで
- **実行成功率**: 指示通りに実行できた比率
- **エラー発生率**: 実行中のエラー発生頻度
- **タスク完了率**: 期限内の完了率

#### 実績例（2025年7月11日）
- **CC01**: 1行修正プロンプト → 30秒で完了 ✅
- **CC02**: 自動化再起動プロンプト → 無反応 ❌
- **CC03**: 自動化再起動プロンプト → 無反応 ❌

### 🚨 緊急事態対応

#### 無反応エージェントへの対策
1. **段階的エスカレーション**
   - 基本プロンプト → 詳細プロンプト → 緊急プロンプト
2. **代替手段の提供**
   - 自動化システム → 手動実行
3. **負荷分散**
   - 他のエージェントへの作業移譲

#### 長時間ブロックの解除
1. **問題の特定**
   - 技術的問題 vs コミュニケーション問題
2. **迅速な解決策**
   - 1行修正のような最小限の変更
3. **根本原因の対策**
   - 同じ問題の再発防止

## 🎓 学習された知見

### ✅ 成功パターン

#### 1. 明確で具体的な指示
- ❌ "適切に設定してください"
- ✅ "source scripts/agent-init.sh CC01"

#### 2. 緊急性の明確な表現
- 🚨マークの効果的使用
- 実行時間の明示（"30秒で完了"）
- 具体的な利益の提示

#### 3. 段階的アプローチ
- 基本的な再起動 → 完全リセット
- 自動化システム → 手動実行
- 個別対応 → 統一プロンプト

#### 4. 確認方法の提示
- 成功/失敗の判定基準
- 実行結果の確認コマンド
- 期待される出力例

### ❌ 避けるべきパターン

#### 1. 曖昧な指示
- 技術的詳細の不足
- 実行手順の不明確さ
- 成功条件の不明確さ

#### 2. 長すぎる説明
- 重要な指示が埋もれる
- 実行すべきコマンドが不明確
- 緊急性が伝わらない

#### 3. 確認方法なし
- 成功したかわからない
- エラーの対処方法なし
- 次のステップが不明

### 🔧 継続的改善

#### プロンプト改善のサイクル
1. **実行** → プロンプト送信
2. **測定** → 応答時間・成功率
3. **学習** → 何がうまくいったか
4. **改善** → 次回のプロンプト改善

#### 知見の蓄積
- 成功事例の文書化
- 失敗パターンの分析
- ベストプラクティスの更新

---

## 📚 プロジェクト管理の全体戦略

### 🎯 Phase管理

#### Phase 3の教訓
- **技術的ブロック**: 1行修正で9時間のブロック
- **コミュニケーション**: 明確な指示の重要性
- **自動化**: システムの再起動が必要

#### Phase 4への準備
- 学習した知見の活用
- 改善されたプロンプト使用
- より効率的なエージェント管理

### 📊 品質管理

#### CI/CDの監視
- 22/23チェック成功の価値
- 残り1つの修正の重要性
- 段階的な品質向上

#### テスト戦略
- 統合テストの課題
- 環境依存問題の対策
- 自動化テストの信頼性

---

**重要**: このドキュメントは実際の運用経験に基づいて継続的に更新されます。新しい知見や改善点があれば追記してください。

**更新履歴**:
- 2025-07-11: 初版作成（CC01の1行修正成功事例を基に）