# language: ja

フィーチャー: プロジェクト管理システム
  ITDOのプロジェクトマネージャーとして
  プロジェクトを効率的に管理したい
  なぜならプロジェクトの成功率を向上させ、リソースを最適化したいから

  背景:
    前提 認証済みのプロジェクトマネージャーとしてログインしている
    かつ プロジェクト管理の権限を持っている

  シナリオ: 新規プロジェクトの作成
    もし "新規プロジェクト"ボタンをクリックする
    かつ 以下のプロジェクト情報を入力する:
      | 項目         | 値                           |
      | プロジェクト名 | 新ERP導入プロジェクト          |
      | コード       | ERP-2025-001                 |
      | 説明         | 全社ERPシステムの刷新          |
      | 開始日       | 2025-08-01                   |
      | 終了日       | 2026-03-31                   |
      | 予算         | 50000000                     |
      | ステータス    | 計画中                       |
    かつ "作成"ボタンをクリックする
    ならば プロジェクトが正常に作成される
    かつ プロジェクト詳細画面に遷移する
    かつ 作成したプロジェクト情報が表示される

  シナリオ: WBS（作業分解構造）の作成
    前提 "ERP-2025-001"プロジェクトが存在する
    もし プロジェクト詳細画面で"WBS"タブを選択する
    かつ "タスク追加"ボタンをクリックする
    かつ 以下のタスク情報を入力する:
      | 項目         | 値                    |
      | タスク名     | 要件定義              |
      | 説明         | システム要件の明確化    |
      | 開始日       | 2025-08-01            |
      | 終了日       | 2025-09-30            |
      | 見積工数     | 320                   |
    かつ "保存"ボタンをクリックする
    ならば タスクがWBSに追加される
    かつ タスクがガントチャートに表示される

  シナリオ: サブタスクの追加（階層構造）
    前提 "要件定義"タスクが存在する
    もし "要件定義"タスクを選択する
    かつ "サブタスク追加"をクリックする
    かつ 以下のサブタスク情報を入力する:
      | 項目         | 値                    |
      | タスク名     | 業務要件定義          |
      | 開始日       | 2025-08-01            |
      | 終了日       | 2025-08-31            |
      | 見積工数     | 160                   |
    かつ "保存"ボタンをクリックする
    ならば サブタスクが"要件定義"の下に追加される
    かつ 親タスクの期間が自動調整される
    かつ WBSが階層構造で表示される

  シナリオ: タスクの依存関係設定
    前提 "要件定義"タスクと"設計"タスクが存在する
    もし "設計"タスクを選択する
    かつ "依存関係"セクションを開く
    かつ "前提タスク"として"要件定義"を選択する
    かつ 依存タイプとして"終了-開始"を選択する
    かつ "保存"ボタンをクリックする
    ならば 依存関係が設定される
    かつ ガントチャートに依存線が表示される
    かつ "設計"の開始日が"要件定義"の終了日以降に自動調整される

  シナリオ: マイルストーンの設定
    前提 "ERP-2025-001"プロジェクトが存在する
    もし プロジェクト詳細画面で"マイルストーン"タブを選択する
    かつ "マイルストーン追加"ボタンをクリックする
    かつ 以下のマイルストーン情報を入力する:
      | 項目             | 値                    |
      | マイルストーン名  | 要件定義完了          |
      | 予定日           | 2025-09-30            |
      | 成果物           | 要件定義書            |
      | 承認者           | 田中太郎              |
    かつ "保存"ボタンをクリックする
    ならば マイルストーンが追加される
    かつ ガントチャートにダイヤモンド記号で表示される
    かつ 関連タスクとの紐付けが可能になる

  シナリオ: リソースの割り当て
    前提 "業務要件定義"タスクが存在する
    かつ 以下のリソースが登録されている:
      | 名前     | スキル              | 稼働率上限 |
      | 山田花子 | ビジネスアナリスト   | 100%      |
      | 佐藤次郎 | システムアナリスト   | 80%       |
    もし "業務要件定義"タスクを選択する
    かつ "リソース割当"セクションを開く
    かつ "山田花子"を50%で割り当てる
    かつ "佐藤次郎"を30%で割り当てる
    かつ "保存"ボタンをクリックする
    ならば リソースがタスクに割り当てられる
    かつ リソースの稼働状況が更新される
    かつ オーバーアロケーションがチェックされる

  シナリオ: ガントチャートでのスケジュール調整
    前提 ガントチャート画面を表示している
    かつ "設計"タスクが表示されている
    もし "設計"タスクのバーをドラッグする
    かつ 開始日を5日後ろにずらす
    ならば タスクの開始日と終了日が更新される
    かつ 依存する後続タスクも自動的に調整される
    かつ クリティカルパスが再計算される
    かつ プロジェクト全体の終了日が更新される

  シナリオ: 進捗の更新と追跡
    前提 "業務要件定義"タスクが進行中である
    もし タスク詳細画面を開く
    かつ 完了率を"30%"に更新する
    かつ 実績工数として"48時間"を入力する
    かつ "更新"ボタンをクリックする
    ならば タスクの進捗が更新される
    かつ ガントチャートの進捗バーが更新される
    かつ 親タスクの進捗が自動計算される
    かつ プロジェクト全体の進捗が更新される

  シナリオ: 遅延タスクの検出と警告
    前提 現在日が"2025-09-01"である
    かつ "業務要件定義"の終了予定日が"2025-08-31"である
    かつ タスクの完了率が"70%"である
    もし システムが日次チェックを実行する
    ならば タスクが遅延として検出される
    かつ プロジェクトマネージャーに通知が送信される
    かつ ダッシュボードに遅延警告が表示される
    かつ 影響を受ける後続タスクがハイライトされる

  シナリオ: リソース稼働率の分析
    前提 複数のプロジェクトが存在する
    かつ "山田花子"が複数のタスクに割り当てられている
    もし "リソース管理"画面を開く
    かつ "山田花子"を選択する
    かつ 期間として"2025年8月"を指定する
    ならば 月間の稼働率グラフが表示される
    かつ 日別の割当状況が表示される
    かつ オーバーアロケーションの日が赤色で表示される
    かつ 稼働率の最適化提案が表示される

  シナリオ: プロジェクトレポートの生成
    前提 "ERP-2025-001"プロジェクトが進行中である
    もし "レポート"メニューを選択する
    かつ "進捗レポート"を選択する
    かつ レポート期間として"2025年8月"を指定する
    かつ "生成"ボタンをクリックする
    ならば 以下の情報を含むレポートが生成される:
      | 項目               | 内容                        |
      | プロジェクト進捗率  | 全体の完了率とトレンド       |
      | マイルストーン状況  | 達成/未達成のマイルストーン  |
      | タスク統計         | 完了/進行中/未着手の内訳     |
      | リソース稼働状況   | メンバー別の稼働率          |
      | 課題とリスク       | 遅延タスクと対策            |
      | 予算消化状況       | 予算対実績の比較            |
    かつ PDFまたはExcelでダウンロード可能である

  シナリオ: 複数プロジェクトのポートフォリオ管理
    前提 管理者権限を持っている
    かつ 10個のアクティブなプロジェクトが存在する
    もし "ポートフォリオ"ダッシュボードを開く
    ならば 全プロジェクトの概要が表示される
    かつ 以下の情報が確認できる:
      | 項目               | 表示内容                    |
      | プロジェクト一覧   | ステータス別の分類          |
      | 全体進捗          | 平均進捗率とトレンド         |
      | リソース配分      | プロジェクト別の人員配置     |
      | 予算状況          | 全体予算と消化率            |
      | リスクマップ      | 高リスクプロジェクトの識別   |
    かつ ドリルダウンして詳細を確認できる