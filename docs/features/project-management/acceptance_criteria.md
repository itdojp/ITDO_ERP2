# プロジェクト管理システム - 受け入れ条件とエッジケース

## 受け入れ条件

### 1. プロジェクト管理
- [ ] プロジェクトの作成時に必須項目（名称、コード、期間）の検証が行われる
- [ ] プロジェクトコードは組織内で一意である
- [ ] プロジェクト期間は1日以上、10年以内である
- [ ] 予算は0以上の数値である
- [ ] プロジェクトステータスの遷移ルールが適用される（計画中→進行中→完了）

### 2. WBS管理
- [ ] タスクは最大10階層まで作成可能
- [ ] タスクの期間は親タスクの期間内に収まる
- [ ] サブタスクの進捗が親タスクに自動反映される
- [ ] タスクの削除時に子タスクも含めて削除確認が表示される
- [ ] 循環依存の検出と防止が機能する

### 3. リソース管理
- [ ] リソースの稼働率は0-100%の範囲で設定可能
- [ ] 同一期間での割当合計が100%を超える場合に警告が表示される
- [ ] リソースの休暇期間が考慮される
- [ ] スキルマッチングによる推奨リソースが表示される

### 4. ガントチャート
- [ ] 1000タスクまでスムーズに表示される
- [ ] ズームイン/アウトが可能（日/週/月/四半期/年）
- [ ] クリティカルパスが赤色でハイライトされる
- [ ] 依存関係の線が正しく描画される
- [ ] ドラッグ&ドロップ時にリアルタイムで制約チェックが行われる

### 5. 進捗管理
- [ ] 完了率は0-100%の範囲で1%単位で設定可能
- [ ] 実績工数の入力時に見積工数との乖離率が表示される
- [ ] 遅延タスクが自動的に検出される
- [ ] 進捗更新履歴が保存される

## エッジケース

### 1. 境界値テスト
- **超長期プロジェクト**: 10年間のプロジェクトでもパフォーマンス劣化なし
- **大規模WBS**: 1000タスク、10階層の深さでも正常動作
- **多重リソース割当**: 1タスクに20人割当でも問題なし
- **同時編集**: 10人が同時に同じプロジェクトを編集してもデータ整合性維持

### 2. 異常系シナリオ
- **循環依存**: A→B→C→Aのような依存関係の検出と拒否
- **不可能なスケジュール**: 子タスクの合計期間が親タスクを超える場合のエラー
- **リソース競合**: 同じリソースが同時刻に200%割当される場合の防止
- **データ不整合**: 親タスクを削除した際の子タスクの扱い

### 3. パフォーマンステスト
- **大量データ**: 10,000プロジェクト登録時の検索速度
- **同時アクセス**: 100人同時アクセス時の応答時間
- **複雑な計算**: 1000タスクのクリティカルパス計算が3秒以内
- **大容量レポート**: 1年分のデータを含むレポート生成が10秒以内

### 4. セキュリティケース
- **権限チェック**: プロジェクト非メンバーがURLを直接入力してもアクセス拒否
- **データ漏洩防止**: 削除されたプロジェクトのデータが他から参照不可
- **監査ログ**: 全ての更新操作が記録される
- **セッション管理**: 長時間アイドル後の自動ログアウト

### 5. ユーザビリティケース
- **入力ミス対応**: 誤って重要データを削除した場合の復元機能
- **一括操作**: 100タスクを一度に更新してもUIがフリーズしない
- **オフライン対応**: ネットワーク切断時の適切なエラーメッセージ
- **多言語対応**: 日本語プロジェクト名でも文字化けなし

### 6. 統合テスト
- **カレンダー連携**: 外部カレンダーとの同期でタイムゾーン考慮
- **通知システム**: 1000件の通知が同時発生してもシステムダウンなし
- **データエクスポート**: 10MBのプロジェクトデータのエクスポートが可能
- **API制限**: 1分間に1000回のAPI呼び出しでもレート制限が適切に機能

### 7. 特殊な業務ケース
- **24時間稼働プロジェクト**: シフト制での リソース管理
- **国際プロジェクト**: 複数タイムゾーンにまたがるスケジュール管理
- **アジャイルプロジェクト**: スプリント単位での進捗管理
- **ハイブリッド管理**: ウォーターフォールとアジャイルの混在

### 8. データ移行ケース
- **レガシーデータ**: Excel/MS Projectからのインポート
- **不完全データ**: 必須項目が欠けているデータの処理
- **重複データ**: 同一プロジェクトコードの検出と処理
- **大量インポート**: 10,000タスクの一括インポート

### 9. 障害回復ケース
- **トランザクション失敗**: 途中でエラーが発生した場合のロールバック
- **同時更新競合**: 楽観的ロックによる競合解決
- **サーバー障害**: 処理中のデータの整合性維持
- **バックアップ復元**: 特定時点へのデータ復元

### 10. 使い勝手の考慮
- **ショートカットキー**: キーボードのみでの主要操作
- **ドラッグ&ドロップ**: タッチデバイスでも操作可能
- **自動保存**: 入力中のデータが失われない
- **元に戻す/やり直し**: 最大20操作まで可能

## テスト優先順位

### 高優先度（必須）
1. 基本的なCRUD操作
2. WBSの階層構造管理
3. 依存関係の設定と制約チェック
4. リソース割当とオーバーアロケーション検出
5. 進捗更新と自動計算

### 中優先度（重要）
1. ガントチャートの表示と操作
2. マイルストーン管理
3. レポート生成
4. 権限管理
5. 通知機能

### 低優先度（nice to have）
1. 外部システム連携
2. 高度な分析機能
3. カスタマイズ機能
4. モバイル対応
5. オフライン機能