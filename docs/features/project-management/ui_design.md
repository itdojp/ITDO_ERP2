# プロジェクト管理システム - UI/UX設計書

## 概要
プロジェクト管理システムのユーザーインターフェース設計書です。React 18とTypeScript 5を使用し、レスポンシブデザインとアクセシビリティに配慮した設計となっています。

## デザイン原則

### 1. ユーザビリティ
- 直感的な操作性
- 3クリック以内で主要機能にアクセス
- コンテキストに応じた操作の提供
- 一貫性のあるUIパターン

### 2. パフォーマンス
- 初期表示3秒以内
- 仮想スクロールによる大量データ対応
- 遅延ローディングの活用
- オプティミスティックUI更新

### 3. アクセシビリティ
- WCAG 2.1 AA準拠
- キーボードナビゲーション対応
- スクリーンリーダー対応
- 高コントラストモード

## 画面構成

### 1. プロジェクト一覧画面

```
┌─────────────────────────────────────────────────────────────┐
│ 🏢 ITDO ERP - プロジェクト管理                    👤 田中太郎 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ プロジェクト一覧                     [➕ 新規プロジェクト]  │
│                                                             │
│ [🔍 検索...] [📊 ステータス▼] [📅 期間▼] [🏢 組織▼]      │
│                                                             │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ □ プロジェクト名      ステータス  進捗  期限       │   │
│ ├─────────────────────────────────────────────────────┤   │
│ │ □ 📁 新ERP導入       🟢 進行中   45%  2026/03/31  │   │
│ │   └ 📄 要件定義フェーズ  🟢 進行中   80%  2025/09/30  │   │
│ │ □ 📁 システム保守     🔄 繰り返し  -    毎月       │   │
│ │ □ 📁 基幹システム更新  🟡 計画中    0%  2026/12/31  │   │
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ [1] [2] [3] ... [10]  表示: 20件 ▼                        │
└─────────────────────────────────────────────────────────────┘
```

**機能要素:**
- プロジェクト階層表示（親子関係）
- ステータスアイコン（🟢進行中、🟡計画中、🔴遅延、✅完了、🔄繰り返し）
- 進捗バー表示
- フィルタリング機能
- 一括選択・操作

### 2. プロジェクト詳細画面

```
┌─────────────────────────────────────────────────────────────┐
│ ← プロジェクト一覧  新ERP導入プロジェクト (ERP-2025-001)   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ [概要] [WBS] [ガント] [メンバー] [マイルストーン] [予実]   │
│                                                             │
│ ┌─────────────────────────────────┬─────────────────────┐ │
│ │ プロジェクト情報               │ 進捗状況           │ │
│ ├─────────────────────────────────┼─────────────────────┤ │
│ │ ステータス: 🟢 進行中          │ 全体進捗: 45%      │ │
│ │ 期間: 2025/08/01 - 2026/03/31  │ ▓▓▓▓▓▓▓░░░░░░░░   │ │
│ │ 予算: ¥50,000,000             │                    │ │
│ │ リーダー: 田中太郎             │ 完了タスク: 12/35  │ │
│ │                                │ 遅延タスク: 2      │ │
│ └─────────────────────────────────┴─────────────────────┘ │
│                                                             │
│ 最近の活動                                                  │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ • 2025/07/28 14:30 - 要件定義書レビュー完了         │   │
│ │ • 2025/07/28 10:15 - タスク「画面設計」進捗更新 80% │   │
│ │ • 2025/07/27 16:45 - 新メンバー追加: 佐藤次郎      │   │
│ └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 3. WBS（作業分解構造）画面

```
┌─────────────────────────────────────────────────────────────┐
│ WBS - 新ERP導入プロジェクト              [➕ タスク追加]    │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ [🔍 検索] [👤 担当者▼] [📊 ステータス▼] [一括編集]        │
│                                                             │
│ タスク名                    担当   進捗  期間        操作  │
│ ─────────────────────────────────────────────────────────  │
│ ▼ 1. 要件定義              -      80%  08/01-09/30  ⋮    │
│   ▼ 1.1 業務要件定義       山田   90%  08/01-08/31  ⋮    │
│     □ 1.1.1 現行業務分析   山田   ✅   08/01-08/15  ⋮    │
│     □ 1.1.2 要件ヒアリング 山田   ✅   08/10-08/20  ⋮    │
│     □ 1.1.3 要件整理      山田   70%  08/20-08/31  ⋮    │
│   ▶ 1.2 システム要件定義   佐藤   70%  08/15-09/15  ⋮    │
│   ▶ 1.3 要件レビュー      田中   60%  09/15-09/30  ⋮    │
│ ▶ 2. 設計                 -      0%   10/01-12/31  ⋮    │
│ ▶ 3. 開発                 -      0%   01/01-03/15  ⋮    │
│                                                             │
│ 選択: 3タスク [依存関係設定] [一括更新] [削除]             │
└─────────────────────────────────────────────────────────────┘
```

**機能要素:**
- ドラッグ&ドロップによる階層変更
- インライン編集
- 複数選択と一括操作
- 展開/折りたたみ
- 進捗の視覚的表示

### 4. ガントチャート画面

```
┌─────────────────────────────────────────────────────────────┐
│ ガントチャート - 新ERP導入     [日][週][月][Q]  [⚙ 設定]   │
├─────────────────────────────────────────────────────────────┤
│                          2025年8月        2025年9月         │
│ タスク名              |1 |8 |15|22|29|5 |12|19|26|         │
│ ─────────────────────────────────────────────────────────  │
│ ▼ 要件定義            |████████████████████████████|        │
│   ▼ 業務要件定義      |██████████████████░░░░|              │
│     現行業務分析      |████████|                            │
│     要件ヒアリング    |   |████████|                        │
│     要件整理         |       |██████████░░░|                │
│   ▶ システム要件定義  |     |████████████████████░░|        │
│   ▶ 要件レビュー     |                 |████████████░|      │
│ ▶ 設計               |                              |█████  │
│                                                             │
│ 凡例: ████ 完了 ████ 進行中 ░░░░ 未着手 ◆ マイルストーン │
│      ━━━ クリティカルパス  ┈┈┈ 依存関係                   │
└─────────────────────────────────────────────────────────────┘
```

**機能要素:**
- ズームレベル切り替え（日/週/月/四半期/年）
- ドラッグによるスケジュール調整
- クリティカルパス表示
- 依存関係の可視化
- リソース稼働状況のオーバーレイ表示

### 5. プロジェクトメンバー管理画面

```
┌─────────────────────────────────────────────────────────────┐
│ プロジェクトメンバー - 新ERP導入      [➕ メンバー追加]     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 現在のメンバー (5名)                                        │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 👤 田中太郎                              稼働率: 100% │   │
│ │ 役割: プロジェクトリーダー                          │   │
│ │ 期間: 2025/08/01 - 2026/03/31                       │   │
│ │ [📊 稼働状況] [✏️ 編集] [🗑️ 削除]                  │   │
│ ├─────────────────────────────────────────────────────┤   │
│ │ 👤 山田花子                              稼働率: 80%  │   │
│ │ 役割: ビジネスアナリスト                             │   │
│ │ 期間: 2025/08/01 - 2025/12/31                       │   │
│ │ [📊 稼働状況] [✏️ 編集] [🗑️ 削除]                  │   │
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ リソース稼働状況                                            │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 2025年8月の稼働率                                   │   │
│ │ 田中: ████████████████████ 100%                    │   │
│ │ 山田: ████████████████░░░░  80%                    │   │
│ │ 佐藤: ████████████████████ 100% ⚠️ オーバー        │   │
│ └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 6. 予実管理画面

```
┌─────────────────────────────────────────────────────────────┐
│ 予実管理 - 新ERP導入                    [📊 レポート出力]   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 予算状況                           契約金額: ¥60,000,000   │
│ ┌─────────────────────────┬─────────────────────────────┐ │
│ │ 項目         予定      実績      差異               │ │
│ ├─────────────────────────┼─────────────────────────────┤ │
│ │ 人件費    20,000,000  18,500,000  -1,500,000 ✅    │ │
│ │ 外注費    15,000,000  16,200,000  +1,200,000 ⚠️    │ │
│ │ 経費       5,000,000   4,800,000    -200,000 ✅    │ │
│ ├─────────────────────────┼─────────────────────────────┤ │
│ │ 合計      40,000,000  39,500,000    -500,000       │ │
│ └─────────────────────────┴─────────────────────────────┘ │
│                                                             │
│ 進捗と消化率                                                │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 予算消化率: 79% ████████████████░░░░                │   │
│ │ 工数消化率: 85% █████████████████░░░ ⚠️             │   │
│ │ 期間経過率: 75% ███████████████░░░░░                │   │
│ └─────────────────────────────────────────────────────┘   │
│                                                             │
│ 収益性分析                                                  │
│ ┌─────────────────────────────────────────────────────┐   │
│ │ 見積利益: ¥10,000,000 (16.7%)                      │   │
│ │ 現在予想: ¥ 8,000,000 (13.3%) 📉                   │   │
│ └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## コンポーネント設計

### 1. 共通コンポーネント

```typescript
// プロジェクトカード
interface ProjectCardProps {
  project: Project;
  onSelect: (id: number) => void;
  showProgress?: boolean;
  showHierarchy?: boolean;
}

// タスク行
interface TaskRowProps {
  task: Task;
  level: number;
  onEdit: (task: Task) => void;
  onToggleExpand: () => void;
  isExpanded: boolean;
}

// ガントバー
interface GanttBarProps {
  task: Task;
  scale: 'day' | 'week' | 'month' | 'quarter';
  onDrag: (task: Task, newDates: DateRange) => void;
}

// 進捗インジケーター
interface ProgressIndicatorProps {
  percentage: number;
  showLabel?: boolean;
  size?: 'small' | 'medium' | 'large';
  status?: 'normal' | 'warning' | 'danger';
}
```

### 2. レイアウトコンポーネント

```typescript
// メインレイアウト
interface MainLayoutProps {
  sidebar: ReactNode;
  header: ReactNode;
  content: ReactNode;
  footer?: ReactNode;
}

// タブパネル
interface TabPanelProps {
  tabs: TabConfig[];
  activeTab: string;
  onTabChange: (tabId: string) => void;
}

// フィルターバー
interface FilterBarProps {
  filters: FilterConfig[];
  onFilterChange: (filters: FilterValues) => void;
  onSearch: (query: string) => void;
}
```

### 3. 専門コンポーネント

```typescript
// WBSツリー
interface WBSTreeProps {
  tasks: Task[];
  onTaskUpdate: (task: Task) => void;
  onTaskMove: (taskId: number, newParentId: number) => void;
  enableDragDrop?: boolean;
}

// リソース稼働チャート
interface ResourceUtilizationChartProps {
  resources: Resource[];
  dateRange: DateRange;
  onResourceClick: (resourceId: number) => void;
}

// 予実比較テーブル
interface BudgetComparisonTableProps {
  budget: ProjectBudget;
  onEdit: (item: BudgetItem) => void;
  showForecast?: boolean;
}
```

## インタラクションパターン

### 1. ドラッグ&ドロップ
- WBSでのタスク階層変更
- ガントチャートでのスケジュール調整
- タスク間の依存関係設定

### 2. インライン編集
- タスク名、期間、進捗率の直接編集
- ダブルクリックまたはF2キーで編集モード
- EnterまたはTabで確定、Escでキャンセル

### 3. コンテキストメニュー
- 右クリックで表示
- タスクの複製、削除、依存関係設定
- キーボードショートカット表示

### 4. 一括操作
- チェックボックスによる複数選択
- Shift+クリックで範囲選択
- Ctrl/Cmd+クリックで個別選択

## レスポンシブデザイン

### ブレークポイント
- デスクトップ: 1200px以上
- タブレット: 768px - 1199px
- モバイル: 767px以下

### モバイル最適化
- ガントチャートは横スクロール対応
- WBSは階層を維持しつつコンパクト表示
- タッチ操作に最適化されたUI要素
- スワイプによるタブ切り替え

## アクセシビリティ

### キーボード操作
- Tab: フォーカス移動
- Enter: 選択/実行
- Space: チェックボックス切り替え
- Arrow Keys: リスト内移動
- Ctrl+S: 保存
- Ctrl+Z/Y: 元に戻す/やり直し

### スクリーンリーダー対応
- 適切なARIAラベル
- ランドマークの設定
- 動的コンテンツの通知
- フォーカス管理

### カラーコントラスト
- WCAG AA基準（4.5:1）を満たす
- 色だけに依存しない情報伝達
- ダークモード対応

## パフォーマンス最適化

### 仮想化
- 大量タスクの仮想スクロール
- ガントチャートの部分レンダリング
- 遅延ローディング

### キャッシング
- プロジェクトデータのローカルキャッシュ
- 画像・アイコンの事前読み込み
- APIレスポンスのキャッシュ

### 最適化手法
- React.memo による再レンダリング防止
- useMemo/useCallback の活用
- コード分割とdynamic import